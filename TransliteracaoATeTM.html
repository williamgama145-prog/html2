<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>TransliteraÃ§Ã£o PT â†’ Tamil / Ãrabe</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; background: #f7f7f7; }
textarea { width: 100%; height: 100px; font-size: 16px; padding: 8px; }
button { margin-top: 8px; padding: 10px 16px; font-size: 16px; }
pre { background: #fff; border: 1px solid #ddd; padding: 12px; border-radius: 6px; white-space: pre-wrap; }
.label { font-weight: bold; margin-top: 12px; display: inline-block; margin-right: 5px; }
.speaker { width: 20px; height: 20px; cursor: pointer; vertical-align: middle; }
</style>
</head>
<body>

<h2>TransliteraÃ§Ã£o PT â†’ Tamil / Ãrabe</h2>

<textarea id="inputText">Carro Ã© bonito, JoÃ£o foi lÃ¡.</textarea><br>

<select id="variantSelect">
  <option value="all">Todos</option>
  <option value="tamilLiteral">Tamil Literal</option>
  <option value="tamilSyllabic">Tamil SilÃ¡bico</option>
  <option value="arabic">Ãrabe</option>
</select>
<button onclick="transliterar()">Transliterar</button>

<div id="resultArea">
  <div id="tamilLiteralDiv" style="display:block; margin-top:15px;">
    <span class="label">Tamil Literal:</span>
    <img src="https://img.icons8.com/material-outlined/24/000000/speaker.png" class="speaker" onclick="playTTS('tamilLiteral','ta')">
    <pre id="tamilLiteral">à®µà®£à®•à¯à®•à®®à¯, à®œà¯‹à®µà®¾ à®•à®¾à®°à¯ à®…à®´à®•à®¾à®• à®‰à®³à¯à®³à®¤à¯.</pre>
  </div>

  <div id="tamilSyllabicDiv" style="display:block; margin-top:15px;">
    <span class="label">Tamil SilÃ¡bico:</span>
    <img src="https://img.icons8.com/material-outlined/24/000000/speaker.png" class="speaker" onclick="playTTS('tamilSyllabic','ta')">
    <pre id="tamilSyllabic">à®µ-à®£-à®•à¯-à®•-à®®à¯, à®œà¯‹-à®µà®¾ à®•à®¾-à®°à¯ à®…-à®´-à®•à®¾-à®•à¯ à®‰-à®³à¯-à®³-à®¤à¯.</pre>
  </div>

  <div id="arabicDiv" style="display:block; margin-top:15px;">
    <span class="label">Ãrabe:</span>
    <img src="https://img.icons8.com/material-outlined/24/000000/speaker.png" class="speaker" onclick="playTTS('arabicOut','ar')">
    <pre id="arabicOut">Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø¬Ù…ÙŠÙ„Ø©ØŒ Ø°Ù‡Ø¨ Ø¬ÙˆØ§ Ø¥Ù„Ù‰ Ù‡Ù†Ø§Ùƒ.</pre>
  </div>
</div>

<div style="margin-top:20px;">
  <span class="label">PortuguÃªs:</span>
  <img src="https://img.icons8.com/material-outlined/24/000000/speaker.png" class="speaker" onclick="playTTS('inputText','pt')">
</div>

<script>
// FunÃ§Ã£o TTS usando fetch + Blob (funciona no Android)
async function playTTS(id, lang){
    const el = document.getElementById(id);
    const text = el?.value || el?.textContent?.trim();
    if(!text) return alert('Texto vazio!');
    try {
        const url = `https://translate.google.com/translate_tts?ie=UTF-8&q=${encodeURIComponent(text)}&tl=${lang}&client=tw-ob`;
        const response = await fetch(url);
        if(!response.ok) throw new Error('Falha ao obter Ã¡udio');
        const blob = await response.blob();
        const audioURL = URL.createObjectURL(blob);
        const audio = new Audio(audioURL);
        await audio.play();
    } catch(err){
        console.warn('Erro ao tocar Ã¡udio:', err);
        alert('NÃ£o foi possÃ­vel tocar o Ã¡udio. Tente tocar o Ã­cone novamente.');
    }
}

  

  
<h3>MemÃ³ria do Aplicativo</h3>
<button onclick="saveCurrentText()">ğŸ’¾ Salvar Texto Atual</button>
<button onclick="openSavedWindow()">ğŸ“„ Ver Textos Salvos</button>

<!-- Janela separada de textos salvos -->
<div id="savedTextsWindow">
  <h3>Textos Salvos <span id="closeSavedWindow" onclick="closeSavedWindow()">âœ–</span></h3>
  <div id="savedTextsArea"></div>
</div>

<script>
/* --- NORMALIZAÃ‡ÃƒO --- */
function normalizePT(text){
  return (text||"").normalize('NFD').replace(/[\u0300-\u036f]/g,'').toLowerCase();
}

/* --- MAPAS TAMIL --- */
const TAM_LIT = {
  'a':'à®…','b':'à®ª','c':'à®•à¯','d':'à®Ÿà¯','e':'à®','f':'à®ƒà®ª','g':'à®•à¯','h':'à®¹','i':'à®‡','j':'à®œ',
  'k':'à®•à¯','l':'à®²','m':'à®®','n':'à®¨','o':'à®’','p':'à®ª','q':'à®•à¯','r':'à®°','s':'à®¸','t':'à®Ÿà¯',
  'u':'à®‰','v':'à®µ','w':'à®µ','x':'à®•à¯à®¸à¯','y':'à®¯','z':'à®œ',
  ' ':' ','!':'!','.':'.',',':',','?':'?','-':'-'
};
const TAM_BASE = {
  'b':'à®ªà¯','c':'à®•à¯','d':'à®Ÿà¯','f':'à®ƒà®ªà¯','g':'à®•à¯','h':'à®¹à¯','j':'à®œà¯','k':'à®•à¯','l':'à®²à¯',
  'm':'à®®à¯','n':'à®¨à¯','p':'à®ªà¯','q':'à®•à¯','r':'à®°à¯','s':'à®¸à¯','t':'à®Ÿà¯','v':'à®µà¯','w':'à®µà¯',
  'x':'à®•à¯à®¸à¯','y':'à®¯à¯','z':'à®œà¯','rr':'à®°à¯à®°à¯','ss':'à®¸à¯à®¸','nh':'à®à¯','ch':'à®šà¯','lh':'à®³à¯'
};
const TAM_VOW_IND = {'a':'à®…','e':'à®','i':'à®‡','o':'à®’','u':'à®‰'};
const TAM_VOW_DIAC = {'a':'','e':'à¯†','i':'à®¿','o':'à¯Š','u':'à¯'};
const SIL_DG = ['nh','lh','rr','ss','ch'];

/* --- MAPA ÃRABE --- */
const ARAB_MAP = {
  /* Trigramas / sons combinados */
  'tra':'ØªØ±Ø§','tri':'ØªØ±ÙŠ','tre':'ØªØ±ÙŠ','tro':'ØªØ±Ùˆ','lli':'Ù„ÙŠ','lha':'Ù„ÙŠØ§','lho':'Ù„ÙŠÙˆ','lhe':'Ù„ÙŠÙŠ',
  'nhÃ£':'Ù†ÙŠØ§','nhÃ¡':'Ù†ÙŠØ§','Ã§Ã£o':'Ø³Ø§Ùˆ','Ã§Ãµes':'Ø³Ø§ÙˆØ³','cha':'Ø´Ø§','che':'Ø´ÙŠ','chi':'Ø´ÙŠ','cho':'Ø´Ùˆ',
  'gui':'ØºÙŠ','gue':'ØºÙŠ','gÃ¼e':'ØºÙŠ','gÃ£o':'ØºØ§Ùˆ','rro':'Ø­Ùˆ',
  /* Digramas */
  'ca':'ÙƒØ§','co':'ÙƒÙˆ','cu':'ÙƒÙˆ','ce':'Ø³ÙŠ','ci':'Ø³ÙŠ',
  'Ã§a':'Ø³Ø§','Ã§Ã£':'Ø³Ø§','Ã§Ã¡':'Ø³Ø§','Ã§i':'Ø³ÙŠ','Ã§Ã­':'Ø³ÙŠ','Ã§o':'Ø³Ùˆ','Ã§Ã³':'Ø³Ùˆ','Ã§u':'Ø³Ùˆ','Ã§Ãº':'Ø³Ùˆ','Ã§Ãµ':'Ø³Ùˆ',
  'nh':'Ù†','lh':'Ù„','rr':'Ø±','ss':'Ø³',
  /* Letras isoladas */
  'a':'Ø§','b':'Ø¨','c':'Ùƒ','Ã§':'Ø³','d':'Ø¯','e':'ÙŠ','f':'Ù','g':'Ø¬','h':'Ù‡','i':'ÙŠ','j':'Ø¬',
  'k':'Ùƒ','l':'Ù„','m':'Ù…','n':'Ù†','o':'Ùˆ','p':'Ø¨','q':'Ù‚','r':'Ø±','s':'Ø³','t':'Øª',
  'u':'Ùˆ','v':'Ù','w':'Ùˆ','x':'ÙƒØ³','y':'ÙŠ','z':'Ø²',
  ' ':' ','!':'!','.':'.',',':',','?':'ØŸ','-':'-'
};

/* --- AJUSTE DE Rs --- */
function ajustarRs(texto){
  return (texto||"").split(/\b/).map(palavra=>{
    if(!/^[a-zA-Z]+$/.test(palavra)) return palavra;
    let p = palavra.toLowerCase();
    p = p.replace(/rr/g, 'Ø­');
    p = p.replace(/^r/g, 'Ø­');
    p = p.replace(/r(?=[ktpqc])/g, 'Ø­');
    p = p.replace(/(?<=[aeiou])r(?=[aeiou])/g, 'Ø±');
    p = p.replace(/r$/g, 'Ø­');
    p = p.replace(/r/g, 'Ø±');
    return p;
  }).join('');
}

/* --- TransliteraÃ§Ã£o Ã¡rabe --- */
function translitArabic(text){
  const ajustado = ajustarRs(text || "");
  const s = normalizePT(ajustado);
  const keys = Object.keys(ARAB_MAP).sort((a,b)=>b.length-a.length);
  let resultado = s;
  for(const k of keys){ resultado = resultado.split(k).join(ARAB_MAP[k]); }
  return resultado;
}

/* --- Tamil Literal --- */
function translitTamilLiteral(text){
  const s = normalizePT(text||"");
  let out = '';
  for(let i=0;i<s.length;){
    let matched = false;
    for(const dg of SIL_DG){
      if(s.substr(i,dg.length) === dg){
        for(const ch of dg) out += (TAM_LIT[ch] || ch);
        i += dg.length;
        matched = true;
        break;
      }
    }
    if(matched) continue;
    out += (TAM_LIT[s[i]] || s[i]);
    i++;
  }
  return out;
}

/* --- Tamil SilÃ¡bico --- */
function translitTamilSyllabic(text){
  const s = normalizePT(text||"");
  const tokens = s.match(/\s+|\S+/g) || [];
  const out = tokens.map(tok=>{
    if(!/[a-z]/.test(tok)) return tok;
    const phon = [];
    for(let i=0;i<tok.length;){
      let found = false;
      for(const dg of SIL_DG){
        if(tok.substr(i,dg.length) === dg){ phon.push(dg); i+=dg.length; found=true; break; }
      }
      if(found) continue;
      phon.push(tok[i]); i++;
    }
    const res = [];
    for(let i=0;i<phon.length;){
      const p = phon[i];
      if(TAM_BASE[p]){
        const next = phon[i+1];
        if(next && ['a','e','i','o','u'].includes(next)){
          const base = TAM_BASE[p].replace(/à¯$/,'');
          const diac = TAM_VOW_DIAC[next] || '';
          res.push(base + diac);
          i += 2;
        } else { res.push(TAM_BASE[p]); i++; }
      } else if(['a','e','i','o','u'].includes(p)){ res.push(TAM_VOW_IND[p]||p); i++; }
      else{ res.push(TAM_LIT[p] || p); i++; }
    }
    return res.join('');
  });
  return out.join('');
}


/* --- MemÃ³ria --- */
let savedTexts = JSON.parse(localStorage.getItem('savedTexts')||'[]');

function saveCurrentText(){
  const variant = document.getElementById('variantSelect').value;
  let txt='';
  if(variant==='tamilLiteral') txt=translitTamilLiteral(document.getElementById('inputText').value);
  else if(variant==='tamilSyllabic') txt=translitTamilSyllabic(document.getElementById('inputText').value);
  else if(variant==='arabic') txt=translitArabic(document.getElementById('inputText').value);
  else txt={
    'tamilLiteral':translitTamilLiteral(document.getElementById('inputText').value),
    'tamilSyllabic':translitTamilSyllabic(document.getElementById('inputText').value),
    'arabic':translitArabic(document.getElementById('inputText').value)
  };
  savedTexts.push(txt);
  localStorage.setItem('savedTexts',JSON.stringify(savedTexts));
  alert('Texto salvo na memÃ³ria do aplicativo!');
}

function openSavedWindow(){
  document.getElementById('savedTextsWindow').style.display='block';
  renderSavedTexts();
}

function closeSavedWindow(){
  document.getElementById('savedTextsWindow').style.display='none';
}

function renderSavedTexts(){
  const area=document.getElementById('savedTextsArea');
  area.innerHTML='';
  savedTexts.forEach((t,i)=>{
    const div=document.createElement('div');
    if(typeof t==='string') div.textContent=t;
    else div.textContent='[Variantes Salvas]';
    const del=document.createElement('button');
    del.textContent='âŒ Apagar';
    del.onclick=()=>{ savedTexts.splice(i,1); localStorage.setItem('savedTexts',JSON.stringify(savedTexts)); renderSavedTexts();};
    const speak=document.createElement('none');
   // speak.textContent='ğŸ”Š Ouvir';
    speak.onclick=()=>{
      if(typeof t==='string') speakTextDirect(t,'pt-BR');
      else{
        if(t.tamilLiteral) speakTextDirect(t.tamilLiteral,'ta-IN');
        if(t.tamilSyllabic) speakTextDirect(t.tamilSyllabic,'ta-IN');
        if(t.arabic) speakTextDirect(t.arabic,'ar-SA');
      }
    };
    div.appendChild(del);
    div.appendChild(speak);
    area.appendChild(div);
  });


}
async function playTTS(id, lang){
    const text = document.getElementById(id)?.textContent?.trim();
    if(!text) return alert('Texto vazio!');
    try {
        const url = `https://translate.google.com/translate_tts?ie=UTF-8&q=${encodeURIComponent(text)}&tl=${lang}&client=tw-ob`;
        const response = await fetch(url);
        if(!response.ok) throw new Error('Falha ao obter Ã¡udio');
        const blob = await response.blob();
        const audioURL = URL.createObjectURL(blob);
        const audio = new Audio(audioURL);
        await audio.play();  // sÃ³ toca quando o usuÃ¡rio clicar
    } catch(err){
        console.warn('Erro ao tocar Ã¡udio:', err);
        alert('NÃ£o foi possÃ­vel tocar o Ã¡udio.');
    }
}

/* --- Transliterate com seletor --- */
function transliterar(){
  const txt=document.getElementById('inputText').value||'';
  const variant=document.getElementById('variantSelect').value;
  if(variant==='tamilLiteral'){
    document.getElementById('tamilLiteralDiv').style.display='block';
    document.getElementById('tamilLiteral').textContent=translitTamilLiteral(txt);
    document.getElementById('tamilSyllabicDiv').style.display='none';
    document.getElementById('arabicDiv').style.display='none';
  } else if(variant==='tamilSyllabic'){
    document.getElementById('tamilSyllabicDiv').style.display='block';
    document.getElementById('tamilSyllabic').textContent=translitTamilSyllabic(txt);
    document.getElementById('tamilLiteralDiv').style.display='none';
    document.getElementById('arabicDiv').style.display='none';
  } else if(variant==='arabic'){
    document.getElementById('arabicDiv').style.display='block';
    document.getElementById('arabicOut').textContent=translitArabic(txt);
    document.getElementById('tamilLiteralDiv').style.display='none';
    document.getElementById('tamilSyllabicDiv').style.display='none';
  } else {
    document.getElementById('tamilLiteralDiv').style.display='block';
    document.getElementById('tamilLiteral').textContent=translitTamilLiteral(txt);
    document.getElementById('tamilSyllabicDiv').style.display='block';
    document.getElementById('tamilSyllabic').textContent=translitTamilSyllabic(txt);
    document.getElementById('arabicDiv').style.display='block';
    document.getElementById('arabicOut').textContent=translitArabic(txt);
  }
}

/* --- InicializaÃ§Ã£o --- */
document.addEventListener('DOMContentLoaded',()=>{ transliterar(); });

</script>
</body>
</html>




