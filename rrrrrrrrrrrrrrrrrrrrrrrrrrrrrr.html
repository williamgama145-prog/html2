<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<title>TransliteraÃ§Ã£o PT â†’ Tamil / Ãrabe</title>
<style>
body{font-family:Arial,sans-serif;padding:20px;background:#f7f7f7;}
textarea{width:100%;height:100px;font-size:16px;padding:8px;}
button{margin-top:8px;padding:10px 16px;font-size:16px;}
pre{background:#fff;border:1px solid #ddd;padding:12px;border-radius:6px;white-space:pre-wrap;}
.label{font-weight:bold;margin-top:12px;display:inline-block;margin-right:5px;}
.speaker{width:20px;height:20px;cursor:pointer;vertical-align:middle;}
#savedTextsArea div{margin-bottom:5px;padding:5px;border:1px solid #ccc;border-radius:5px;background:#f0f0f0;}
#savedTextsWindow{display:none;position:fixed;top:50px;left:50%;transform:translateX(-50%);width:90%;max-width:500px;height:70%;background:#fff;border:2px solid #000;overflow:auto;padding:10px;z-index:1000;}
#savedTextsWindow h3{margin-top:0;}
#closeSavedWindow{float:right;cursor:pointer;font-weight:bold;}
.audioBtn{cursor:pointer;margin-left:8px;vertical-align:middle;}
</style>
</head>
<body>

<h2>TransliteraÃ§Ã£o PT â†’ Tamil / Ãrabe</h2>
<textarea id="inputText"></textarea><br>


Â Â 
Â Â 
<select id="variantSelect">
Â  <option value="all">Todos</option>
Â  <option value="tamilLiteral">Tamil Literal</option>
Â  <option value="tamilSyllabic">Tamil SilÃ¡bico</option>
Â  <option value="arabic">Ãrabe</option>
</select>

<button class="btnAction" onclick="transliterar()">Transliterar</button>
<button class="btnAction" onclick="apagarTexto()">ğŸ—‘ï¸ Apagar Texto</button>

<script>
// FunÃ§Ã£o simples para apagar o texto do textarea
function apagarTexto(){
Â  document.getElementById('inputText').value = '';
}
</script>

<style>
/* Define largura, altura e padding iguais para os dois botÃµes */
.btnAction {
Â  width: 160px;Â  Â  Â  Â /* largura fixa, ajustÃ¡vel */
Â  height: 40px;Â  Â  Â  Â /* altura fixa */
Â  font-size: 16px;
Â  margin-top: 8px;
Â  margin-right: 8px;
Â  cursor: pointer;
}
</style>

Â Â 
Â Â 

Â Â 
Â Â 
Â Â 

<div id="resultArea">
Â  <div id="tamilLiteralDiv" style="display:none">
Â  Â  <span class="label">Tamil Literal:</span>
Â  Â  <pre id="tamilLiteral"></pre>
Â  Â  <button onclick="copiarTransliteracao('tamilLiteral')">ğŸ“‹ Copiar</button>
Â  </div>

Â  <div id="tamilSyllabicDiv" style="display:none">
Â  Â  <span class="label">Tamil SilÃ¡bico:</span>
Â  Â  <pre id="tamilSyllabic"></pre>
Â  Â  <button onclick="copiarTransliteracao('tamilSyllabic')">ğŸ“‹ Copiar</button>
Â  </div>

Â  <div id="arabicDiv" style="display:none">
Â  Â  <span class="label">Ãrabe:</span>
Â  Â  <pre id="arabicOut"></pre>
Â  Â  <button onclick="copiarTransliteracao('arabicOut')">ğŸ“‹ Copiar</button>
Â  </div>
</div>


<h3>MemÃ³ria do Aplicativo</h3>
<button onclick="saveCurrentText()">ğŸ’¾ Salvar Texto Atual</button>
<button onclick="openSavedWindow()">ğŸ“„ Ver Textos Salvos</button>


Â Â 
<div id="savedTextsWindow">
Â  <h3>Textos Salvos <span id="closeSavedWindow" onclick="closeSavedWindow()">âœ–</span></h3>
Â  <div id="savedTextsArea"></div>
</div>

<script>
/* --- NORMALIZAÃ‡ÃƒO --- */
// CORREÃ‡ÃƒO: Usa um placeholder para garantir que 'Ã§' nunca seja convertido para 'c' durante a remoÃ§Ã£o de acentos.
function normalizePT(text){
Â  // 1. Converte TUDO para minÃºsculas (incluindo 'Ã‡' para 'Ã§').
Â  let s = (text || "").toLowerCase();
Â  
Â  // 2. Substitui 'Ã§' (minÃºsculo) por um placeholder Ãºnico ANTES da normalizaÃ§Ã£o.
Â  s = s.replace(/Ã§/g, '__CEDILLA__');

Â  // 3. Remove acentos de todo o resto (Ã¡ -> a, Ã© -> e, etc.)
Â  s = s.normalize('NFD').replace(/[\u0300-\u036f]/g,'');

Â  // 4. Reverte o placeholder de volta para 'Ã§'.
Â  s = s.replace(/__CEDILLA__/g, 'Ã§');

Â  return s;
}

/* --- MAPAS TAMIL --- */
const TAM_LIT = {
Â  'a':'à®…','b':'à®ª','c':'à®•à¯','Ã§':'à®¸à¯','d':'à®Ÿà¯','e':'à®','f':'à®ƒà®ª','g':'à®•à¯','h':'à®¹','i':'à®‡','j':'à®œ',
Â  'k':'à®•à¯','l':'à®²','m':'à®®','n':'à®¨','o':'à®’','p':'à®ª','q':'à®•à¯','r':'à®°','s':'à®¸','t':'à®Ÿà¯',
Â  'u':'à®‰','v':'à®µ','w':'à®µ','x':'à®•à¯à®¸à¯','y':'à®¯','z':'à®œ',
Â  ' ':' ','!':'!','.':'.',',':',','?':'?','-':'-'
};
const TAM_BASE = {
Â  'b':'à®ªà¯','c':'à®•à¯','Ã§':'à®¸à¯','d':'à®Ÿà¯','f':'à®ƒà®ªà¯','g':'à®•à¯','h':'à®¹à¯','j':'à®œà¯','k':'à®•à¯','l':'à®²à¯',
Â  'm':'à®®à¯','n':'à®¨à¯','p':'à®ªà¯','q':'à®•à¯','r':'à®°à¯','s':'à®¸à¯','t':'à®Ÿà¯','v':'à®µà¯','w':'à®µà¯',
Â  'x':'à®•à¯à®¸à¯','y':'à®¯à¯','z':'à®œà¯','rr':'à®°à¯à®°à¯','ss':'à®¸à¯à®¸','nh':'à®à¯','ch':'à®šà¯','lh':'à®³à¯'
};
const TAM_VOW_IND = {'a':'à®…','e':'à®','i':'à®‡','o':'à®’','u':'à®‰'};
const TAM_VOW_DIAC = {'a':'','e':'à¯†','i':'à®¿','o':'à¯Š','u':'à¯'};
const SIL_DG = ['nh','lh','rr','ss','ch'];

/* --- MAPA ÃRABE --- */
const ARAB_MAP = {
Â  /* Trigramas / sons combinados */
Â  'tra':'ØªØ±Ø§','tri':'ØªØ±ÙŠ','tre':'ØªØ±ÙŠ','tro':'ØªØ±Ùˆ','lli':'Ù„ÙŠ','lha':'Ù„ÙŠØ§','lho':'Ù„ÙŠÙˆ','lhe':'Ù„ÙŠÙŠ',
Â  'nhÃ£':'Ù†ÙŠØ§','nhÃ¡':'Ù†ÙŠØ§','Ã§Ã£o':'Ø³Ø§Ùˆ','Ã§Ãµes':'Ø³Ø§ÙˆØ³','cha':'Ø´Ø§','che':'Ø´ÙŠ','chi':'Ø´ÙŠ','cho':'Ø´Ùˆ',
Â  'gui':'ØºÙŠ','gue':'ØºÙŠ','gÃ¼e':'ØºÙŠ','gÃ£o':'ØºØ§Ùˆ','rro':'Ø­Ùˆ',
Â  /* Digramas */
Â  'ca':'ÙƒØ§','co':'ÙƒÙˆ','cu':'ÙƒÙˆ','ce':'Ø³ÙŠ','ci':'Ø³ÙŠ',
Â  'Ã§a':'Ø³Ø§','Ã§Ã£':'Ø³Ø§','Ã§Ã¡':'Ø³Ø§','Ã§i':'Ø³ÙŠ','Ã§Ã­':'Ø³ÙŠ','Ã§o':'Ø³Ùˆ','Ã§Ã³':'Ø³Ùˆ','Ã§u':'Ø³Ùˆ','Ã§Ãº':'Ø³Ùˆ','Ã§Ãµ':'Ø³Ùˆ',
Â  'nh':'Ù†','lh':'Ù„','rr':'Ø±','ss':'Ø³',
Â  /* Letras isoladas */
Â  'a':'Ø§','b':'Ø¨','c':'Ùƒ','Ã§':'Ø³','d':'Ø¯','e':'ÙŠ','f':'Ù','g':'Ø¬','h':'Ù‡','i':'ÙŠ','j':'Ø¬',
Â  'k':'Ùƒ','l':'Ù„','m':'Ù…','n':'Ù†','o':'Ùˆ','p':'Ø¨','q':'Ù‚','r':'Ø±','s':'Ø³','t':'Øª',
Â  'u':'Ùˆ','v':'Ù','w':'Ùˆ','x':'ÙƒØ³','y':'ÙŠ','z':'Ø²',
Â  ' ':' ','!':'!','.':'.',',':',','?':'ØŸ','-':'-'
};

/* --- AJUSTE DE Rs --- */
function ajustarRs(texto){
Â  return (texto||"").split(/\b/).map(palavra=>{
Â  Â  if(!/^[a-zA-Z]+$/.test(palavra)) return palavra;
Â  Â  let p = palavra.toLowerCase();
Â  Â  p = p.replace(/rr/g, 'Ø­');
Â  Â  p = p.replace(/^r/g, 'Ø­');
Â  Â  p = p.replace(/r(?=[ktpqc])/g, 'Ø­');
Â  Â  p = p.replace(/(?<=[aeiou])r(?=[aeiou])/g, 'Ø±');
Â  Â  p = p.replace(/r$/g, 'Ø­');
Â  Â  p = p.replace(/r/g, 'Ø±');
Â  Â  return p;
Â  }).join('');
}

/* --- TransliteraÃ§Ã£o Ã¡rabe --- */
function translitArabic(text){
Â  const ajustado = ajustarRs(text || "");
Â  const s = normalizePT(ajustado);
Â  const keys = Object.keys(ARAB_MAP).sort((a,b)=>b.length-a.length);
Â  let resultado = s;
Â  for(const k of keys){ resultado = resultado.split(k).join(ARAB_MAP[k]); }
Â  return resultado;
}

/* --- Tamil Literal --- */
function translitTamilLiteral(text){
Â  const s = normalizePT(text||"");
Â  let out = '';
Â  for(let i=0;i<s.length;){
Â  Â  let matched = false;
Â  Â  for(const dg of SIL_DG){
Â  Â  Â  if(s.substr(i,dg.length) === dg){
Â  Â  Â  Â  for(const ch of dg) out += (TAM_LIT[ch] || ch);
Â  Â  Â  Â  i += dg.length;
Â  Â  Â  Â  matched = true;
Â  Â  Â  Â  break;
Â  Â  Â  }
Â  Â  }
Â  Â  if(matched) continue;
Â  Â  out += (TAM_LIT[s[i]] || s[i]);
Â  Â  i++;
Â  }
Â  return out;
}

/* --- Tamil SilÃ¡bico --- */
function translitTamilSyllabic(text){
Â  const s = normalizePT(text||"");
Â  const tokens = s.match(/\s+|\S+/g) || [];
Â  const out = tokens.map(tok=>{
Â  Â  if(!/[a-z]/.test(tok)) return tok;
Â  Â  const phon = [];
Â  Â  for(let i=0;i<tok.length;){
Â  Â  Â  let found = false;
Â  Â  Â  for(const dg of SIL_DG){
Â  Â  Â  Â  if(tok.substr(i,dg.length) === dg){ phon.push(dg); i+=dg.length; found=true; break; }
Â  Â  Â  }
Â  Â  Â  if(found) continue;
Â  Â  Â  phon.push(tok[i]); i++;
Â  Â  }
Â  Â  const res = [];
Â  Â  for(let i=0;i<phon.length;){
Â  Â  Â  const p = phon[i];
Â  Â  Â  if(TAM_BASE[p]){
Â  Â  Â  Â  const next = phon[i+1];
Â  Â  Â  Â  if(next && ['a','e','i','o','u'].includes(next)){
Â  Â  Â  Â  Â  const base = TAM_BASE[p].replace(/à¯$/,'');
Â  Â  Â  Â  Â  const diac = TAM_VOW_DIAC[next] || '';
Â  Â  Â  Â  Â  res.push(base + diac);
Â  Â  Â  Â  Â  i += 2;
Â  Â  Â  Â  } else { res.push(TAM_BASE[p]); i++; }
Â  Â  Â  } else if(['a','e','i','o','u'].includes(p)){ res.push(TAM_VOW_IND[p]||p); i++; }
Â  Â  Â  else{ res.push(TAM_LIT[p] || p); i++; }
Â  Â  }
Â  Â  return res.join('');
Â  });
Â  return out.join('');
}
Â Â 
Â Â 
Â Â 
Â Â 
Â Â 
Â Â 
Â Â 
Â Â 
Â Â 
Â Â 
Â Â 
Â  /* --- MEMÃ“RIA TEMPORÃRIA --- */
let cachedTexts = []; // â€œcaixaâ€ temporÃ¡ria em memÃ³ria

// Salvar o texto atual na memÃ³ria
function saveCurrentText(){
Â  const variant = document.getElementById('variantSelect').value;
Â  const inputVal = document.getElementById('inputText').value;
Â  let txt = '';

Â  if(variant === 'tamilLiteral') txt = translitTamilLiteral(inputVal);
Â  else if(variant === 'tamilSyllabic') txt = translitTamilSyllabic(inputVal);
Â  else if(variant === 'arabic') txt = translitArabic(inputVal);
Â  else txt = {
Â  Â  'tamilLiteral': translitTamilLiteral(inputVal),
Â  Â  'tamilSyllabic': translitTamilSyllabic(inputVal),
Â  Â  'arabic': translitArabic(inputVal)
Â  };

Â  cachedTexts.push(txt); // adiciona Ã  memÃ³ria
Â  renderSavedTexts(); // atualiza a visualizaÃ§Ã£o
}

// Abrir a janela de textos salvos
function openSavedWindow(){
Â  document.getElementById('savedTextsWindow').style.display = 'block';
Â  renderSavedTexts();
}

// Fechar a janela
function closeSavedWindow(){
Â  document.getElementById('savedTextsWindow').style.display = 'none';
}

// Renderiza os textos salvos na tela
function renderSavedTexts(){
Â  const area = document.getElementById('savedTextsArea');
Â  area.innerHTML = '';
Â  cachedTexts.forEach((t,i) => {
Â  Â  const div = document.createElement('div');
Â  Â  if(typeof t === 'string') div.textContent = t;
Â  Â  else div.textContent = '[Variantes Salvas]';

Â  Â  const del = document.createElement('button');
Â  Â  del.textContent = 'âŒ Apagar';
Â  Â  del.onclick = () => {
Â  Â  Â  cachedTexts.splice(i,1);
Â  Â  Â  renderSavedTexts();
Â  Â  };

Â  Â  div.appendChild(del);
Â  Â  area.appendChild(div);
Â  });
}

// Baixar todos os textos salvos em um arquivo .txt
function baixarTextosSalvos(){
Â  if(cachedTexts.length === 0){
Â  Â  alert("Nenhum texto salvo para baixar.");
Â  Â  return;
Â  }

Â  const dados = JSON.stringify(cachedTexts, null, 2);
Â  const blob = new Blob([dados], {type: "text/plain"});
Â  const url = URL.createObjectURL(blob);

Â  const link = document.createElement("a");
Â  link.href = url;
Â  link.download = "textos_salvos.txt";
Â  document.body.appendChild(link);
Â  link.click();
Â  document.body.removeChild(link);
Â  URL.revokeObjectURL(url);
}

Â Â 
Â Â 
Â Â 
Â Â 
Â Â 
/* --- Transliterate com seletor --- */
function transliterar(){
Â  const txt=document.getElementById('inputText').value||'';
Â  const variant=document.getElementById('variantSelect').value;
Â  if(variant==='tamilLiteral'){
Â  Â  document.getElementById('tamilLiteralDiv').style.display='block';
Â  Â  document.getElementById('tamilLiteral').textContent=translitTamilLiteral(txt);
Â  Â  document.getElementById('tamilSyllabicDiv').style.display='none';
Â  Â  document.getElementById('arabicDiv').style.display='none';
Â  } else if(variant==='tamilSyllabic'){
Â  Â  document.getElementById('tamilSyllabicDiv').style.display='block';
Â  Â  document.getElementById('tamilSyllabic').textContent=translitTamilSyllabic(txt);
Â  Â  document.getElementById('tamilLiteralDiv').style.display='none';
Â  Â  document.getElementById('arabicDiv').style.display='none';
Â  } else if(variant==='arabic'){
Â  Â  document.getElementById('arabicDiv').style.display='block';
Â  Â  document.getElementById('arabicOut').textContent=translitArabic(txt);
Â  Â  document.getElementById('tamilLiteralDiv').style.display='none';
Â  Â  document.getElementById('tamilSyllabicDiv').style.display='none';
Â  } else {
Â  Â  document.getElementById('tamilLiteralDiv').style.display='block';
Â  Â  document.getElementById('tamilLiteral').textContent=translitTamilLiteral(txt);
Â  Â  document.getElementById('tamilSyllabicDiv').style.display='block';
Â  Â  document.getElementById('tamilSyllabic').textContent=translitTamilSyllabic(txt);
Â  Â  document.getElementById('arabicDiv').style.display='block';
Â  Â  document.getElementById('arabicOut').textContent=translitArabic(txt);
Â  }
}
Â Â 
Â Â 
Â Â 
Â Â 
Â  function copiarTransliteracao(idElemento) {
Â  const el = document.getElementById(idElemento);
Â  if (!el) return;
Â Â 
Â  const temp = document.createElement('textarea');
Â  temp.value = el.textContent;
Â  document.body.appendChild(temp);
Â  temp.select();
Â  document.execCommand('copy');
Â  document.body.removeChild(temp);

Â 
}

Â Â 
Â Â 
Â Â 

/* --- InicializaÃ§Ã£o --- */
document.addEventListener('DOMContentLoaded',()=>{ transliterar(); });

</script>
</body>
</html>
